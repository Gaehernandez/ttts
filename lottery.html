<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTTS Cosmic Blind Box | Explore Infinite Possibilities</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0a0a2e 0%, #16213e 50%, #1a1a3a 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯åŠ¨ç”» */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #ffffff;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* é’±åŒ…è¿æ¥éƒ¨åˆ† */
        .wallet-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .wallet-info h3 {
            color: #ffffff;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .wallet-address {
            color: #cccccc;
            font-size: 0.9rem;
            font-family: monospace;
        }

        .connect-btn {
            background: linear-gradient(45deg, #00d4ff, #00ffaa);
            color: #ffffff;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .connect-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
        }

        /* ç§¯åˆ†å’Œä»»åŠ¡å®¹å™¨ */
        .user-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
            align-items: stretch;
        }

        .points-section, .tasks-section {
            min-height: 650px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        /* ä¸ªäººç§¯åˆ†æ¿å— */
        .points-section {
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url('assets/images/lotterys/bg1_mission_board.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
            min-height: 420px;
            display: flex;
            flex-direction: column;
            box-shadow: 
                0 0 20px rgba(0, 212, 255, 0.3),
                0 0 40px rgba(0, 212, 255, 0.1),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .points-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
            z-index: 1;
        }

        .points-section > * {
            position: relative;
            z-index: 2;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .points-section:hover {
            box-shadow: 
                0 0 30px rgba(0, 212, 255, 0.5),
                0 0 60px rgba(0, 212, 255, 0.2),
                inset 0 0 30px rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }

        .points-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .points-header h3 {
            color: #ffffff;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .points-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .points-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .points-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00ffaa;
            margin-bottom: 5px;
        }

        .points-label {
            color: #cccccc;
            font-size: 0.9rem;
        }

        .refresh-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: auto;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .refresh-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
        }

        /* AIä»»åŠ¡ä½“éªŒæ¿å— */
        .tasks-section {
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.2)), url('assets/images/lotterys/bg2_surprise_box_zone.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
            min-height: 420px;
            display: flex;
            flex-direction: column;
            box-shadow: 
                0 0 20px rgba(0, 255, 170, 0.3),
                0 0 40px rgba(0, 255, 170, 0.1),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .tasks-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0,255,170,0.15), transparent);
            animation: shimmer-green 3.5s infinite;
            z-index: 1;
        }

        .tasks-section > * {
            position: relative;
            z-index: 2;
        }

        @keyframes shimmer-green {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .tasks-section:hover {
            box-shadow: 
                0 0 30px rgba(0, 255, 170, 0.5),
                0 0 60px rgba(0, 255, 170, 0.2),
                inset 0 0 30px rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }

        .tasks-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .tasks-header h3 {
            color: #ffffff;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .task-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .task-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            color: #ffffff;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .task-reward {
            color: #00ffaa;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .task-limit {
            color: #cccccc;
            font-size: 0.8rem;
            margin-bottom: 3px;
        }

        .task-progress {
            color: #cccccc;
            font-size: 0.8rem;
        }

        .task-input-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: auto;
            box-shadow: 0 4px 15px rgba(0, 255, 170, 0.2);
        }

        .task-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            color: #ffffff;
            font-size: 1rem;
            resize: vertical;
            min-height: 80px;
        }

        .task-input::placeholder {
            color: #999999;
        }

        .task-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        /* å¤´éƒ¨å¯¼èˆª */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px 0;
        }

        .logo {
            width: 120px;
            height: auto;
            margin-bottom: 20px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #00d4ff, #ff00ff, #00ffaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
        }

        .subtitle {
            font-size: 1.1rem;
            color: #b3b3ff;
            opacity: 0.9;
        }

        /* æ¸¸æˆåŒºåŸŸå®¹å™¨ */
        .game-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        /* æ¸¸æˆå¡ç‰‡ */
        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: flex-start;
            height: 100%;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            z-index: -1;
        }

        .cosmic-box::before {
            background-image: url('assets/images/lotterys/cosmic_surprise_box.jpg');
            opacity: 0.25;
        }
        .moon-treasure::before {
            background-image: url('assets/images/lotterys/moon_treasure_dig.jpg');
            opacity: 0.25;
        }
        .cosmic-box::after, .moon-treasure::after {
            content: '';
            position: absolute;
            top: -40%;
            left: -40%;
            width: 180%;
            height: 180%;
            pointer-events: none;
            background: linear-gradient(120deg, rgba(255,255,255,0.18) 0%, rgba(0,255,255,0.10) 60%, rgba(255,255,255,0.18) 100%);
            filter: blur(8px);
            opacity: 0.7;
            z-index: 2;
            animation: shimmer-activity 3.5s linear infinite;
        }
        @keyframes shimmer-activity {
            0% { transform: translateX(-30%) translateY(-30%) rotate(10deg); }
            100% { transform: translateX(30%) translateY(30%) rotate(10deg); }
        }
        .game-card > * position: relative; z-index: 3; }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
            border-color: rgba(0, 212, 255, 0.5);
        }

        .game-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            background: linear-gradient(45deg, #00d4ff, #00ffaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            align-self: center;
        }

        .game-description {
            color: #cccccc;
            margin-bottom: 20px;
            line-height: 1.6;
            text-align: left;
        }

        .cost-info {
            width: 100%;
            max-width: 340px;
            margin: 0 auto 20px auto;
            background: rgba(0,0,0,0.15);
            border-radius: 12px;
            padding: 18px 0 10px 0;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .game-card > .cost-info {
            margin-top: 0;
        }

        .cost-amount {
            font-size: 1.4rem;
            font-weight: bold;
            color: #ffaa00;
            margin-bottom: 5px;
        }

        .cost-label {
            color: #cccccc;
            font-size: 0.9rem;
        }

        /* å¥–åŠ±åˆ—è¡¨ */
        .rewards-list {
            width: 100%;
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            margin-bottom: 20px;
        }

        .reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .reward-item:last-child {
            border-bottom: none;
        }

        .reward-name {
            color: #ffffff;
        }

        .reward-value {
            color: #00ffaa;
            font-weight: bold;
        }

        /* æ¸¸æˆæŒ‰é’® */
        .play-button {
            width: 100%;
            max-width: 340px;
            margin: 0 auto 0 auto;
            display: block;
            align-self: center;
            padding: 15px;
            background: linear-gradient(45deg, #00d4ff, #0066ff);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .play-button:hover {
            background: linear-gradient(45deg, #00ffaa, #00d4ff);
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
        }

        .play-button:active {
            transform: scale(0.95);
        }

        /* æ’è¡Œæ¦œåŒºåŸŸ */
        .leaderboard-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .leaderboard-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('assets/images/lotterys/leaderboard.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.1;
            z-index: -1;
        }

        .leaderboard-title {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 25px;
            background: linear-gradient(45deg, #ffaa00, #ff6600);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .leaderboard-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .tab-button {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .tab-button.active {
            background: linear-gradient(45deg, #00d4ff, #0066ff);
            border-color: #00d4ff;
        }

        .leaderboard-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }

        .rank {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        .rank.top1 { background: linear-gradient(45deg, #ffd700, #ffaa00); color: #000; }
        .rank.top2 { background: linear-gradient(45deg, #c0c0c0, #999999); color: #000; }
        .rank.top3 { background: linear-gradient(45deg, #cd7f32, #8b4513); color: #fff; }
        .rank.other { background: rgba(255, 255, 255, 0.2); color: #fff; }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .player-address {
            font-size: 0.8rem;
            color: #999;
            font-family: monospace;
        }

        .player-score {
            font-size: 1.1rem;
            font-weight: bold;
            color: #00ffaa;
        }

        /* åº•éƒ¨ä¿¡æ¯ */
        .footer-info {
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            text-align: center;
            color: #cccccc;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .game-card, .leaderboard-section {
                padding: 20px;
            }
            
            .leaderboard-tabs {
                flex-wrap: wrap;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00d4ff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* å¼¹çª—æ ·å¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a3a, #2a2a5a);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #00d4ff;
        }

        .modal-close {
            margin-top: 20px;
            padding: 10px 20px;
            background: #ff6b6b;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars" id="stars"></div>

    <div class="container">
        <!-- é’±åŒ…è¿æ¥éƒ¨åˆ† -->
        <section class="wallet-section">
            <div class="wallet-info">
                <h3>ğŸ”— Wallet Connection</h3>
                <div class="wallet-status">
                    <span class="status-indicator">â— Connected</span>
                    <div class="wallet-address">Address: 5o5ZCS...qbyy</div>
                </div>
            </div>
            <button class="connect-btn">Disconnect</button>
        </section>

        <!-- ç”¨æˆ·é¢æ¿ -->
        <div class="user-dashboard">
            <!-- ä¸ªäººç§¯åˆ†éƒ¨åˆ† -->
            <section class="points-section">
                <div class="points-header">
                    <span>ğŸ’°</span>
                    <h3>My Points</h3>
                </div>
                <div class="points-grid">
                    <div class="points-card">
                        <div class="points-value">2590</div>
                        <div class="points-label">Total Points</div>
                    </div>
                    <div class="points-card">
                        <div class="points-value">0</div>
                        <div class="points-label">Today's Points</div>
                    </div>
                </div>
                <button class="refresh-btn">Refresh Points</button>
            </section>

            <!-- AIåŠŸèƒ½ä½“éªŒä»»åŠ¡éƒ¨åˆ† -->
            <section class="tasks-section">
                <div class="tasks-header">
                    <span>ğŸ®</span>
                    <h3>AI Function Experience Tasks</h3>
                </div>
                
                <div class="task-item">
                    <div class="task-icon">ğŸ¨</div>
                    <div class="task-content">
                        <div class="task-title">AI Image Generation</div>
                        <div class="task-reward">+10 Points/Use</div>
                        <div class="task-limit">3 uses per day</div>
                        <div class="task-progress">Today's remaining uses: 3</div>
                    </div>
                </div>

                <div class="task-item">
                    <div class="task-icon" style="background: linear-gradient(45deg, #9b59b6, #e74c3c);">ğŸ¬</div>
                    <div class="task-content">
                        <div class="task-title">AI Video Generation</div>
                        <div class="task-reward">+20 Points/Use</div>
                        <div class="task-limit">2 uses per day</div>
                        <div class="task-progress">Today's remaining uses: 2</div>
                    </div>
                </div>

                <div class="task-item">
                    <div class="task-icon" style="background: linear-gradient(45deg, #3498db, #2ecc71);">ğŸ¤–</div>
                    <div class="task-content">
                        <div class="task-title">AI Voice Chat</div>
                        <div class="task-reward">+5 Points/Use</div>
                        <div class="task-limit">4 uses per day</div>
                        <div class="task-progress">Today's remaining uses: 2</div>
                    </div>
                </div>

                <div class="task-input-section">
                    <textarea 
                        class="task-input" 
                        placeholder="Please enter image description..."
                        rows="3"
                    ></textarea>
                </div>
            </section>
        </div>

        <!-- å¤´éƒ¨ -->
        <header class="header">
            <img src="https://pic1.imgdb.cn/item/68773a2258cb8da5c8b78001.png" alt="TTTS Logo" class="logo">
            <h1 class="title">Cosmic Blind Box Adventure</h1>
            <p class="subtitle">Explore infinite possibilities, discover cosmic treasures</p>
        </header>

        <!-- æ¸¸æˆåŒºåŸŸ -->
        <div class="game-container">
            <!-- å®‡å®™è¶£å‘³ç›²ç›’ -->
            <div class="game-card cosmic-box">
                <h2 class="game-title">ğŸ Cosmic Fun Blind Box</h2>
                <p class="game-description">Open the mysterious cosmic blind box to get precious interstellar resources and surprise rewards! Each box contains infinite possibilities.</p>
                
                <div class="cost-info">
                    <div class="cost-amount">100 Points</div>
                    <div class="cost-label">Per Draw</div>
                </div>

                <div class="rewards-list">
                    <div class="reward-item">
                        <span class="reward-name">ğŸŒŸ Meteorite Fragment</span>
                        <span class="reward-value">30 Points</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">ğŸŒ Planetary Glow</span>
                        <span class="reward-value">80 Points</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">â­ Stellar Energy</span>
                        <span class="reward-value">160 Points</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">ğŸŒŒ Galaxy Core</span>
                        <span class="reward-value">320 Points</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">ğŸŒ  Cosmic Singularity</span>
                        <span class="reward-value">1000 Points</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">ğŸ€ Goddess of Luck</span>
                        <span class="reward-value">0.05-100 SOL</span>
                    </div>
                </div>

                <button class="play-button" onclick="openCosmicBox()">
                    Open Blind Box
                </button>
            </div>

            <!-- æ¢æœˆæŒ–å® -->
            <div class="game-card moon-treasure">
                <h2 class="game-title">ğŸš€ Moon Treasure Dig</h2>
                <p class="game-description">Join the nationwide astronaut moon treasure dig! Invest SOL to participate in this exciting event and have a chance to win generous SOL rewards.</p>
                
                <div class="cost-info">
                    <div class="cost-amount">0.02 SOL + 50 Points</div>
                    <div class="cost-label">Per Entry (50 points as lunar supply)</div>
                </div>

                <div class="rewards-list">
                    <div class="reward-item" style="visibility:hidden;">
                        <span class="reward-name">å ä½</span>
                      
                    </div>
                 
                    <div class="reward-item">
                        <span class="reward-name">ğŸ“Š Prize Pool Distribution</span>
                        <span class="reward-value">80% User Bonus</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">ğŸ¯ Winning Probability</span>
                        <span class="reward-value">Random 10% Users</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">ğŸ—ï¸ Community Development</span>
                        <span class="reward-value">20% Project Development</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-name">â° Draw Time</span>
                        <span class="reward-value">Real-time Draw</span>
                        
                    </div>
                    <div class="reward-item" style="visibility:hidden;">
                        <span class="reward-name">å ä½</span>
                    
                    </div>
                </div>

                <button class="play-button" onclick="startMoonTreasure()">
                    Start Treasure Hunt
                </button>
            </div>
        </div>

        <!-- æ’è¡Œæ¦œ -->
        <div class="leaderboard-section">
            <h2 class="leaderboard-title">ğŸ† Explorer Leaderboard</h2>
            
            <div class="leaderboard-tabs">
                <button class="tab-button active" onclick="switchTab('cosmic')">Blind Box Master</button>
                <button class="tab-button" onclick="switchTab('moon')">Treasure Hunt Hero</button>
                <button class="tab-button" onclick="switchTab('total')">Total Points Leaderboard</button>
            </div>

            <div class="leaderboard-list" id="leaderboard-list">
                <!-- æ’è¡Œæ¦œæ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="leaderboard-item">
                    <div class="rank top1">1</div>
                    <div class="player-info">
                        <div class="player-name">Cosmic Explorer 001</div>
                        <div class="player-address">8K3r...9mLp</div>
                    </div>
                    <div class="player-score">15,420 Points</div>
                </div>
                <div class="leaderboard-item">
                    <div class="rank top2">2</div>
                    <div class="player-info">
                        <div class="player-name">Interstellar Traveler</div>
                        <div class="player-address">9xM4...3nQs</div>
                    </div>
                    <div class="player-score">12,850 Points</div>
                </div>
                <div class="leaderboard-item">
                    <div class="rank top3">3</div>
                    <div class="player-info">
                        <div class="player-name">Moon Digger</div>
                        <div class="player-address">7Gf2...8kVr</div>
                    </div>
                    <div class="player-score">9,650 Points</div>
                </div>
                <div class="leaderboard-item">
                    <div class="rank other">4</div>
                    <div class="player-info">
                        <div class="player-name">Lucky Box King</div>
                        <div class="player-address">5Hj9...4pTw</div>
                    </div>
                    <div class="player-score">8,320 Points</div>
                </div>
                <div class="leaderboard-item">
                    <div class="rank other">5</div>
                    <div class="player-info">
                        <div class="player-name">Cosmic Collector</div>
                        <div class="player-address">3Kl7...6mEq</div>
                    </div>
                    <div class="player-score">7,890 Points</div>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <div class="footer-info">
            <p><strong>âš ï¸ Important Notice:</strong></p>
            <p>ğŸ¯ Rewards are distributed in real time, with a buffer of no more than 12 hours</p>
            <p>ğŸ“ If you have not received your reward, please contact the official Twitter or Telegram group for redemption</p>
            <p>ğŸ† Winners and reward details will be announced on the official Twitter or Telegram group</p>
            <p>â­ Explore the universe, discover infinite possibilities!</p>
        </div>
    </div>

    <!-- ç»“æœå¼¹çª— -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle">Congratulations!</div>
            <div id="modalContent">You have received a mysterious reward!</div>
            <button class="modal-close" onclick="closeModal()">OK</button>
        </div>
    </div>

    <script src="https://unpkg.com/@solana/web3.js@1.73.0/lib/index.iife.min.js"></script>
    <script>
        // API åŸºç¡€URL
        const API_BASE = 'https://api.tungtungtung.art';
        let walletConnected = false;
        let currentAccount = null;
        let currentLeaderboardType = 'cosmic';
        let lootBoxes = [];
        let moonPoolStatus = null;
        let aiTaskStatus = {};

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, type = 'info') {
            // å¯æ ¹æ®éœ€è¦å®ç°å¼¹çª—æˆ–é¡¶éƒ¨æç¤º
            alert(message);
        }

        // é’±åŒ…è¿æ¥ä¸è®¤è¯
        async function connectWallet() {
            try {
                if (!window.solana || !window.solana.isPhantom) {
                    showMessage('è¯·å®‰è£… Phantom é’±åŒ…', 'error');
                    window.open('https://phantom.app/', '_blank');
                    return;
                }
                const response = await window.solana.connect();
                const publicKey = response.publicKey.toString();
                // è·å–nonce
                const nonceResponse = await fetch(`${API_BASE}/get_nonce`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ wallet_address: publicKey })
                });
                const nonceData = await nonceResponse.json();
                const message = `Please sign this message to verify your identity.\n\nNonce: ${nonceData.nonce}`;
                const encodedMessage = new TextEncoder().encode(message);
                const signedMessage = await window.solana.signMessage(encodedMessage, 'utf8');
                const signature = btoa(String.fromCharCode(...signedMessage.signature));
                const verifyResponse = await fetch(`${API_BASE}/verify_signature`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ wallet_address: publicKey, signature, message })
                });
                const verifyData = await verifyResponse.json();
                if (!verifyResponse.ok) throw new Error(verifyData.error || 'ç­¾åéªŒè¯å¤±è´¥');
                walletConnected = true;
                currentAccount = publicKey;
                updateWalletUI();
                await loadAllData();
            } catch (error) {
                showMessage('è¿æ¥é’±åŒ…å¤±è´¥: ' + error.message, 'error');
            }
        }
        async function disconnectWallet() {
            if (window.solana && window.solana.isPhantom) {
                await window.solana.disconnect();
            }
            await fetch(`${API_BASE}/logout`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, credentials: 'include' });
            walletConnected = false;
            currentAccount = null;
            updateWalletUI();
        }
        function updateWalletUI() {
            const walletStatus = document.querySelector('.wallet-status');
            const walletAddress = document.querySelector('.wallet-address');
            const connectBtn = document.querySelector('.connect-btn');
            if (walletConnected && currentAccount) {
                walletStatus.innerHTML = '<span class="status-indicator">â— Connected</span>';
                walletAddress.textContent = 'Address: ' + currentAccount.slice(0, 6) + '...' + currentAccount.slice(-4);
                connectBtn.textContent = 'Disconnect';
                connectBtn.onclick = disconnectWallet;
            } else {
                walletStatus.innerHTML = '<span class="status-indicator" style="color:#ccc">â— Not Connected</span>';
                walletAddress.textContent = '';
                connectBtn.textContent = 'Connect Wallet';
                connectBtn.onclick = connectWallet;
            }
        }

        // åŠ è½½æ‰€æœ‰æ•°æ®
        async function loadAllData() {
            await Promise.all([
                loadPoints(),
                loadAITaskStatus(),
                loadLootBox(),
                loadMoonPool(),
                loadLeaderboard(currentLeaderboardType)
            ]);
        }

        // ä¸ªäººç§¯åˆ†
        async function loadPoints() {
            try {
                const response = await fetch(`${API_BASE}/api/points/balance`, { credentials: 'include' });
                const data = await response.json();
                document.querySelector('.points-grid .points-card:nth-child(1) .points-value').textContent = data.data.total_points;
                document.querySelector('.points-grid .points-card:nth-child(2) .points-value').textContent = data.data.daily_points;
            } catch (e) {
                document.querySelector('.points-grid .points-card:nth-child(1) .points-value').textContent = '0';
                document.querySelector('.points-grid .points-card:nth-child(2) .points-value').textContent = '0';
            }
        }
        document.querySelector('.refresh-btn').onclick = loadPoints;

        // AIåŠŸèƒ½ä½“éªŒä»»åŠ¡
        async function loadAITaskStatus() {
            try {
                const response = await fetch(`${API_BASE}/api/product/experience/status`, { credentials: 'include' });
                const data = await response.json();
                aiTaskStatus = data.status;
                // æ›´æ–°UI
                const taskList = [
                    { type: 'image', idx: 1 },
                    { type: 'video', idx: 2 },
                    { type: 'chat', idx: 3 }
                ];
                taskList.forEach(({ type, idx }) => {
                    const task = aiTaskStatus[type];
                    if (task) {
                        const taskItem = document.querySelector(`.tasks-section .task-item:nth-child(${idx})`);
                        if (taskItem) {
                            taskItem.querySelector('.task-progress').textContent = `ä»Šæ—¥å‰©ä½™æ¬¡æ•°: ${task.remaining}`;
                        }
                    }
                });
            } catch (e) {}
        }

        // ç›²ç›’å¥–æ± 
        async function loadLootBox() {
            try {
                const response = await fetch(`${API_BASE}/api/lootbox/list`, { credentials: 'include' });
                const data = await response.json();
                lootBoxes = data.data.loot_boxes;
                // åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªç›²ç›’
                const box = lootBoxes[0];
                document.querySelector('.cosmic-box .cost-amount').textContent = box.cost_points + ' Points';
                // å¥–åŠ±åˆ—è¡¨
                const rewardsList = document.querySelector('.cosmic-box .rewards-list');
                rewardsList.innerHTML = box.rewards.map(r => `<div class="reward-item"><span class="reward-name">${r.emoji || ''} ${r.name}</span><span class="reward-value">${r.value}</span></div>`).join('');
            } catch (e) {}
        }
        document.querySelector('.cosmic-box .play-button').onclick = async function() {
            if (!walletConnected) { showMessage('è¯·å…ˆè¿æ¥é’±åŒ…', 'error'); return; }
            try {
                const box = lootBoxes[0];
                const response = await fetch(`${API_BASE}/api/lootbox/draw`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ loot_box_id: box.id })
                });
                const data = await response.json();
                if (!response.ok) throw new Error(data.error || 'æŠ½å¥–å¤±è´¥');
                showModal('ç›²ç›’æŠ½å¥–ç»“æœ', `${data.data.reward.emoji || ''} æ­å–œè·å¾—: ${data.data.reward.name} ${data.data.reward.value}`);
                await loadPoints();
            } catch (e) { showMessage('æŠ½å¥–å¤±è´¥: ' + e.message, 'error'); }
        };

        // æ¢æœˆæŒ–å®å¥–æ± 
        async function loadMoonPool() {
            try {
                const response = await fetch(`${API_BASE}/api/sol-pool/status`, { credentials: 'include' });
                const data = await response.json();
                moonPoolStatus = data.data;
                document.querySelector('.moon-treasure .cost-amount').textContent = `${moonPoolStatus.required_amount} SOL + ${moonPoolStatus.reward_points} Points`;
                // å¥–åŠ±åˆ—è¡¨
                const rewardsList = document.querySelector('.moon-treasure .rewards-list');
                rewardsList.innerHTML = `
                    <div class="reward-item"><span class="reward-name">ğŸ“Š å¥–æ± åˆ†é…</span><span class="reward-value">80% ç”¨æˆ·å¥–é‡‘</span></div>
                    <div class="reward-item"><span class="reward-name">ğŸ¯ ä¸­å¥–æ¦‚ç‡</span><span class="reward-value">éšæœº10%ç”¨æˆ·</span></div>
                    <div class="reward-item"><span class="reward-name">ğŸ—ï¸ ç¤¾åŒºå‘å±•</span><span class="reward-value">20% é¡¹ç›®å‘å±•</span></div>
                    <div class="reward-item"><span class="reward-name">â° å¼€å¥–æ—¶é—´</span><span class="reward-value">å®æ—¶å¼€å¥–</span></div>
                `;
            } catch (e) {}
        }
        document.querySelector('.moon-treasure .play-button').onclick = async function() {
            if (!walletConnected) { showMessage('è¯·å…ˆè¿æ¥é’±åŒ…', 'error'); return; }
            try {
                // è¿™é‡Œåªåšæ¨¡æ‹Ÿï¼Œå®é™…åº”è°ƒç”¨å‚ä¸æ¥å£
                showMessage('è¯·åœ¨test_points.htmlä½“éªŒçœŸå®å‚ä¸æµç¨‹', 'info');
            } catch (e) { showMessage('å‚ä¸å¤±è´¥: ' + e.message, 'error'); }
        };

        // æ’è¡Œæ¦œ
        async function loadLeaderboard(type = 'cosmic') {
            let sort_by = 'total';
            if (type === 'cosmic') sort_by = 'total';
            if (type === 'moon') sort_by = 'moon';
            if (type === 'total') sort_by = 'total';
            try {
                const response = await fetch(`${API_BASE}/api/points/leaderboard?sort_by=${sort_by}&limit=5`, { credentials: 'include' });
                const data = await response.json();
                const list = data.data.leaderboard;
                const leaderboardList = document.getElementById('leaderboard-list');
                leaderboardList.innerHTML = list.map((user, idx) => `
                    <div class="leaderboard-item">
                        <div class="rank ${idx===0?'top1':idx===1?'top2':idx===2?'top3':'other'}">${user.rank}</div>
                        <div class="player-info">
                            <div class="player-name">${user.nickname || 'ç”¨æˆ·' + user.rank}</div>
                            <div class="player-address">${user.wallet_address.slice(0,6)}...${user.wallet_address.slice(-4)}</div>
                        </div>
                        <div class="player-score">${user.total_points} Points</div>
                    </div>
                `).join('');
            } catch (e) {}
        }
        document.querySelectorAll('.tab-button').forEach((btn, idx) => {
            btn.onclick = function() {
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                if (idx === 0) loadLeaderboard('cosmic');
                if (idx === 1) loadLeaderboard('moon');
                if (idx === 2) loadLeaderboard('total');
            };
        });

        // å¼¹çª—
        function showModal(title, content) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('resultModal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }
        document.getElementById('resultModal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            updateWalletUI();
            // æ£€æŸ¥è®¤è¯çŠ¶æ€
            fetch(`${API_BASE}/check_auth`, { credentials: 'include' })
                .then(res => res.json())
                .then(data => {
                    if (data.authenticated) {
                        walletConnected = true;
                        currentAccount = data.wallet_address;
                        updateWalletUI();
                        loadAllData();
                    }
                });
            window.addEventListener('scroll', function() {
                const scrolled = window.pageYOffset;
                const stars = document.getElementById('stars');
                stars.style.transform = `translateY(${scrolled * 0.5}px)`;
            });
        });
    </script>
</body>
</html> 