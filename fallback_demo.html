<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fallbackæœºåˆ¶æ¼”ç¤º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-button {
            background: #007cba;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #005a8a;
        }
        .broken-button {
            background: #dc3545;
        }
        .broken-button:hover {
            background: #c82333;
        }
        .test-image {
            max-width: 200px;
            height: auto;
            margin: 10px;
            border: 2px solid #ddd;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        .warning {
            background: #fff3cd;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›¡ï¸ Fallbackæœºåˆ¶æ¼”ç¤º</h1>
        
        <div class="test-section">
            <h2>ğŸ“‹ æµ‹è¯•è¯´æ˜</h2>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•èµ„æºåŠ è½½å¤±è´¥æ—¶çš„fallbackæœºåˆ¶ã€‚</p>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¥æ¨¡æ‹Ÿä¸åŒçš„åŠ è½½åœºæ™¯ã€‚</p>
        </div>
        
        <div class="test-section">
            <h2>ğŸ”§ æµ‹è¯•æ§åˆ¶</h2>
            <button class="test-button" onclick="testNormalLoading()">æµ‹è¯•æ­£å¸¸åŠ è½½</button>
            <button class="test-button broken-button" onclick="testBrokenCDN()">æ¨¡æ‹ŸCDNå¤±è´¥</button>
            <button class="test-button" onclick="testLocalFallback()">åˆ‡æ¢åˆ°æœ¬åœ°èµ„æº</button>
            <button class="test-button" onclick="resetTest()">é‡ç½®æµ‹è¯•</button>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            <div id="test-status" class="status">å‡†å¤‡å°±ç»ª</div>
            <div id="test-images">
                <!-- æµ‹è¯•å›¾ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
        
        <div class="test-section">
            <h2>ğŸ“ æ—¥å¿—è®°å½•</h2>
            <pre id="test-log" style="background: #f8f9fa; padding: 10px; border-radius: 5px; max-height: 200px; overflow-y: auto;"></pre>
        </div>
    </div>

    <script>
        const testLog = document.getElementById('test-log');
        const testStatus = document.getElementById('test-status');
        const testImages = document.getElementById('test-images');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            testLog.textContent += `[${timestamp}] ${message}\n`;
            testLog.scrollTop = testLog.scrollHeight;
        }
        
        function updateStatus(message, type = 'success') {
            testStatus.textContent = message;
            testStatus.className = `status ${type}`;
        }
        
        function testNormalLoading() {
            log('å¼€å§‹æµ‹è¯•æ­£å¸¸åŠ è½½...');
            updateStatus('æµ‹è¯•æ­£å¸¸åŠ è½½', 'success');
            
            // æ¸…ç©ºæµ‹è¯•åŒºåŸŸ
            testImages.innerHTML = '';
            
            // æ·»åŠ ä¸€äº›æµ‹è¯•å›¾ç‰‡
            const testUrls = [
                'https://i.ibb.co/YdKVQ5j/tttslogo.png',
                'https://i.ibb.co/FBtN4PR/background111.jpg'
            ];
            
            testUrls.forEach((url, index) => {
                const img = document.createElement('img');
                img.src = url;
                img.className = 'test-image';
                img.onload = () => log(`å›¾ç‰‡ ${index + 1} åŠ è½½æˆåŠŸ: ${url}`);
                img.onerror = () => log(`å›¾ç‰‡ ${index + 1} åŠ è½½å¤±è´¥: ${url}`);
                testImages.appendChild(img);
            });
        }
        
        function testBrokenCDN() {
            log('å¼€å§‹æµ‹è¯•CDNå¤±è´¥...');
            updateStatus('æ¨¡æ‹ŸCDNå¤±è´¥', 'error');
            
            // æ¸…ç©ºæµ‹è¯•åŒºåŸŸ
            testImages.innerHTML = '';
            
            // æ·»åŠ ä¸€äº›æ— æ•ˆçš„CDNé“¾æ¥
            const brokenUrls = [
                'https://broken-cdn.example.com/image1.jpg',
                'https://invalid-host.com/image2.jpg'
            ];
            
            brokenUrls.forEach((url, index) => {
                const img = document.createElement('img');
                img.src = url;
                img.className = 'test-image';
                img.onload = () => log(`å›¾ç‰‡ ${index + 1} åŠ è½½æˆåŠŸ: ${url}`);
                img.onerror = () => {
                    log(`å›¾ç‰‡ ${index + 1} åŠ è½½å¤±è´¥: ${url}`);
                    // æ¨¡æ‹Ÿfallback
                    const fallbackUrl = `assets/images/logo/logo${index + 1}.png`;
                    img.src = fallbackUrl;
                    img.style.border = '2px dashed #ff9800';
                    log(`å›¾ç‰‡ ${index + 1} åˆ‡æ¢åˆ°fallback: ${fallbackUrl}`);
                };
                testImages.appendChild(img);
            });
        }
        
        function testLocalFallback() {
            log('å¼€å§‹æµ‹è¯•æœ¬åœ°èµ„æº...');
            updateStatus('æµ‹è¯•æœ¬åœ°èµ„æº', 'warning');
            
            // å¦‚æœå­˜åœ¨å…¨å±€çš„switchToLocalResourceså‡½æ•°ï¼Œè°ƒç”¨å®ƒ
            if (typeof switchToLocalResources === 'function') {
                switchToLocalResources();
                log('è°ƒç”¨å…¨å±€fallbackå‡½æ•°');
            } else {
                log('æœªæ‰¾åˆ°å…¨å±€fallbackå‡½æ•°');
            }
        }
        
        function resetTest() {
            log('é‡ç½®æµ‹è¯•...');
            updateStatus('å‡†å¤‡å°±ç»ª', 'success');
            testImages.innerHTML = '';
            log('æµ‹è¯•å·²é‡ç½®');
        }
        
        // åˆå§‹åŒ–
        window.onload = function() {
            log('Fallbackæœºåˆ¶æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
            updateStatus('é¡µé¢å·²åŠ è½½ï¼Œå‡†å¤‡æµ‹è¯•', 'success');
        };
    </script>
</body>
</html>